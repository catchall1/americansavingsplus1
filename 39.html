<body>
  <div id="ip-info">
    Your IP address: 
    <span id="ip"></span>
  </div>
  <div id="location-info">
    Your location: 
    <span id="location"></span>
  </div>
  <div id="console-log"></div>
  <script>
    function getIP() {
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
        const ipElement = document.getElementById('ip');
        ipElement.textContent = data.ip;
        getLocation(data.ip);
      }
             );
    }
    function getLocation(ip) {
      fetch('https://api.ipgeolocation.io/ipgeo?apiKey=22315b8a3ce647eba7e92ee2a45d59bd&ip='+ip)
        .then(response => response.json())
        .then(data => {
        if(data.success){
          const location = data.city + ', ' + data.region;
          const locationElement = document.getElementById('location');
          locationElement.textContent = location;
        }
        else {
          console.log(data);
          document.getElementById('console-log').innerHTML = data;
        }
      }
             )
        .catch(error => {
        console.error(error);
      }
              );
    }
    window.onload = function() {
      getIP();
    }
  </script>
</body>
